<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –†—ã–±–∏–Ω—Å–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .api-endpoint {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .endpoint-url {
            font-family: 'Courier New', monospace;
            background: #2d3748;
            color: #68d391;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            display: inline-block;
            font-size: 0.9em;
        }

        .method {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.8em;
            margin-right: 10px;
        }

        .method.get {
            background: #48bb78;
            color: white;
        }

        .description {
            color: #666;
            margin-top: 10px;
            line-height: 1.6;
        }

        .routes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .route-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .route-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .route-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .route-name {
            color: #333;
            line-height: 1.5;
        }

        .route-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-top: 10px;
        }

        .route-type.bus {
            background: #fed7d7;
            color: #c53030;
        }

        .route-type.trolleybus {
            background: #bee3f8;
            color: #2c5282;
        }

        .status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-top: 10px;
        }

        .status.active {
            background: #c6f6d5;
            color: #22543d;
        }

        .status.planned {
            background: #feebc8;
            color: #7c2d12;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        code {
            background: #f1f1f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .example-response {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-top: 10px;
        }

        .example-response pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöå API –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</h1>
            <p class="subtitle">–†—ã–±–∏–Ω—Å–∫ ‚Ä¢ –ê–≤—Ç–æ–±—É—Å—ã –∏ —Ç—Ä–æ–ª–ª–µ–π–±—É—Å—ã</p>
            <p style="margin-top: 15px;">
                <a href="examples.html" style="color: white; text-decoration: underline; opacity: 0.9;">
                    üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
                </a>
            </p>
        </header>

        <div class="content">
            <div class="section">
                <h2>üì° API Endpoints</h2>
                
                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã</strong>
                    <div class="endpoint-url">api/routes.json</div>
                    <div class="description">
                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≤—Ç–æ–±—É—Å–Ω—ã—Ö –∏ —Ç—Ä–æ–ª–ª–µ–π–±—É—Å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≥–æ—Ä–æ–¥–∞ –†—ã–±–∏–Ω—Å–∫–∞.
                    </div>
                    <div class="example-response">
                        <pre>{
  "city": "–†—ã–±–∏–Ω—Å–∫",
  "routes": {
    "bus": [...],
    "trolleybus": [...]
  }
}</pre>
                    </div>
                </div>

                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏</strong>
                    <div class="endpoint-url">api/stops.json</div>
                    <div class="description">
                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏.
                    </div>
                </div>

                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>GTFS –¥–∞–Ω–Ω—ã–µ</strong>
                    <div class="endpoint-url">gtfs/*.txt</div>
                    <div class="description">
                        –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ GTFS —Ñ–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.
                        –î–æ—Å—Ç—É–ø–Ω—ã —Ñ–∞–π–ª—ã: <code>agency.txt</code>, <code>routes.txt</code>, <code>stops.txt</code>, <code>calendar.txt</code>, <code>trips.txt</code>
                    </div>
                </div>

                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API</strong>
                    <div class="endpoint-url">api/info.json</div>
                    <div class="description">
                        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± API, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
                    </div>
                </div>

                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>–ü—Ä–æ–≥–Ω–æ–∑—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</strong>
                    <div class="endpoint-url">api/predictions.json</div>
                    <div class="description">
                        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≥–Ω–æ–∑–∞—Ö –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.
                        <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –°–µ—Ä–≤–∏—Å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
                    </div>
                </div>

                <div class="api-endpoint">
                    <span class="method get">GET</span>
                    <strong>–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ä—à—Ä—É—Ç–µ</strong>
                    <div class="endpoint-url">api/route-details/{route_id}.json</div>
                    <div class="description">
                        –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –º–∞—Ä—à—Ä—É—Ç–µ: —Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è, –ø—Ä–æ—Ç—è–∂–µ–Ω–Ω–æ—Å—Ç—å.
                        <br>–ü—Ä–∏–º–µ—Ä—ã: <code>api/route-details/bus-1.json</code>, <code>api/route-details/trolleybus-1.json</code>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üöè –ú–∞—Ä—à—Ä—É—Ç—ã</h2>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterRoutes('all')">–í—Å–µ</button>
                    <button class="filter-btn" onclick="filterRoutes('bus')">–ê–≤—Ç–æ–±—É—Å—ã</button>
                    <button class="filter-btn" onclick="filterRoutes('trolleybus')">–¢—Ä–æ–ª–ª–µ–π–±—É—Å—ã</button>
                    <button class="filter-btn" onclick="filterRoutes('active')">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                </div>

                <div id="routes-container" class="loading">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤...
                </div>
            </div>
        </div>
    </div>

    <script>
        let allRoutes = [];

        async function loadRoutes() {
            try {
                const response = await fetch('api/routes.json');
                const data = await response.json();
                allRoutes = [...data.routes.bus, ...data.routes.trolleybus];
                displayRoutes(allRoutes);
            } catch (error) {
                document.getElementById('routes-container').innerHTML = 
                    `<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ${error.message}</div>`;
            }
        }

        function displayRoutes(routes) {
            const container = document.getElementById('routes-container');
            
            if (routes.length === 0) {
                container.innerHTML = '<div class="loading">–ú–∞—Ä—à—Ä—É—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            container.innerHTML = '<div class="routes-grid">' +
                routes.map(route => `
                    <div class="route-card">
                        <div class="route-number">–ú–∞—Ä—à—Ä—É—Ç ${route.number}</div>
                        <div class="route-name">${route.name}</div>
                        <div>
                            <span class="route-type ${route.type}">${route.type === 'bus' ? '–ê–≤—Ç–æ–±—É—Å' : '–¢—Ä–æ–ª–ª–µ–π–±—É—Å'}</span>
                            <span class="status ${route.status}">${route.status === 'active' ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è'}</span>
                        </div>
                    </div>
                `).join('') +
                '</div>';
        }

        function filterRoutes(filter) {
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            let filtered = allRoutes;

            if (filter === 'bus') {
                filtered = allRoutes.filter(r => r.type === 'bus');
            } else if (filter === 'trolleybus') {
                filtered = allRoutes.filter(r => r.type === 'trolleybus');
            } else if (filter === 'active') {
                filtered = allRoutes.filter(r => r.status === 'active');
            }

            displayRoutes(filtered);
        }

        // Load routes on page load
        loadRoutes();
    </script>
</body>
</html>

