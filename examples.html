<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API - –†—ã–±–∏–Ω—Å–∫</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .example {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .example h2 {
            color: #667eea;
            margin-top: 0;
        }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9em;
        }
        .run-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .run-btn:hover {
            background: #5568d3;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #667eea;
            display: none;
        }
        .result.show {
            display: block;
        }
    </style>
</head>
<body>
    <h1>üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API</h1>

    <div class="example">
        <h2>–ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã</h2>
        <pre><code>fetch('api/routes.json')
  .then(response => response.json())
  .then(data => {
    console.log('–í—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤:', 
      data.routes.bus.length + data.routes.trolleybus.length);
    console.log('–ê–≤—Ç–æ–±—É—Å—ã:', data.routes.bus);
    console.log('–¢—Ä–æ–ª–ª–µ–π–±—É—Å—ã:', data.routes.trolleybus);
  });</code></pre>
        <button class="run-btn" onclick="example1()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <div id="result1" class="result"></div>
    </div>

    <div class="example">
        <h2>–ü—Ä–∏–º–µ—Ä 2: –ù–∞–π—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ</h2>
        <pre><code>async function findRoutesByStop(stopName) {
  const routesRes = await fetch('api/routes.json');
  const routes = await routesRes.json();
  
  // –§–∏–ª—å—Ç—Ä—É–µ–º –º–∞—Ä—à—Ä—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫—É
  const allRoutes = [...routes.routes.bus, ...routes.routes.trolleybus];
  const filtered = allRoutes.filter(route => 
    route.name.includes(stopName)
  );
  
  return filtered;
}

findRoutesByStop('–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π –≤–æ–∫–∑–∞–ª')
  .then(routes => console.log(routes));</code></pre>
        <button class="run-btn" onclick="example2()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <div id="result2" class="result"></div>
    </div>

    <div class="example">
        <h2>–ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</h2>
        <pre><code>fetch('api/info.json')
  .then(response => response.json())
  .then(data => {
    console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:', data.statistics);
    console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:', data.features);
  });</code></pre>
        <button class="run-btn" onclick="example3()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <div id="result3" class="result"></div>
    </div>

    <div class="example">
        <h2>–ü—Ä–∏–º–µ—Ä 4: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏</h2>
        <pre><code>fetch('api/stops.json')
  .then(response => response.json())
  .then(data => {
    data.stops.forEach(stop => {
      console.log(`${stop.name}: ${stop.latitude}, ${stop.longitude}`);
    });
  });</code></pre>
        <button class="run-btn" onclick="example4()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <div id="result4" class="result"></div>
    </div>

    <div class="example">
        <h2>–ü—Ä–∏–º–µ—Ä 5: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
        <pre><code>fetch('api/routes.json')
  .then(response => response.json())
  .then(data => {
    const allRoutes = [...data.routes.bus, ...data.routes.trolleybus];
    const activeRoutes = allRoutes.filter(r => r.status === 'active');
    console.log('–ê–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:', activeRoutes.length);
    console.log('–ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:', activeRoutes);
  });</code></pre>
        <button class="run-btn" onclick="example5()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <div id="result5" class="result"></div>
    </div>

    <script>
        function showResult(id, content) {
            const result = document.getElementById(id);
            result.textContent = content;
            result.classList.add('show');
        }

        async function example1() {
            try {
                const response = await fetch('api/routes.json');
                const data = await response.json();
                const total = data.routes.bus.length + data.routes.trolleybus.length;
                showResult('result1', 
                    `–í—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤: ${total}\n` +
                    `–ê–≤—Ç–æ–±—É—Å–æ–≤: ${data.routes.bus.length}\n` +
                    `–¢—Ä–æ–ª–ª–µ–π–±—É—Å–æ–≤: ${data.routes.trolleybus.length}`
                );
            } catch (error) {
                showResult('result1', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function example2() {
            try {
                const routesRes = await fetch('api/routes.json');
                const routes = await routesRes.json();
                const allRoutes = [...routes.routes.bus, ...routes.routes.trolleybus];
                const filtered = allRoutes.filter(route => 
                    route.name.includes('–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π –≤–æ–∫–∑–∞–ª')
                );
                showResult('result2', 
                    `–ù–∞–π–¥–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —á–µ—Ä–µ–∑ "–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π –≤–æ–∫–∑–∞–ª": ${filtered.length}\n\n` +
                    filtered.map(r => `‚Ä¢ ${r.number}: ${r.name}`).join('\n')
                );
            } catch (error) {
                showResult('result2', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function example3() {
            try {
                const response = await fetch('api/info.json');
                const data = await response.json();
                showResult('result3', 
                    `–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n` +
                    `‚Ä¢ –í—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤: ${data.statistics.total_routes}\n` +
                    `‚Ä¢ –ê–≤—Ç–æ–±—É—Å–æ–≤: ${data.statistics.bus_routes}\n` +
                    `‚Ä¢ –¢—Ä–æ–ª–ª–µ–π–±—É—Å–æ–≤: ${data.statistics.trolleybus_routes}\n` +
                    `‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö: ${data.statistics.active_routes}\n` +
                    `‚Ä¢ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö: ${data.statistics.planned_routes}\n` +
                    `‚Ä¢ –û—Å—Ç–∞–Ω–æ–≤–æ–∫: ${data.statistics.total_stops}`
                );
            } catch (error) {
                showResult('result3', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function example4() {
            try {
                const response = await fetch('api/stops.json');
                const data = await response.json();
                const stopsList = data.stops.slice(0, 5).map(stop => 
                    `${stop.name}: ${stop.latitude}, ${stop.longitude}`
                ).join('\n');
                showResult('result4', 
                    `–ü–µ—Ä–≤—ã–µ 5 –æ—Å—Ç–∞–Ω–æ–≤–æ–∫:\n\n${stopsList}\n\n... –∏ –µ—â–µ ${data.stops.length - 5} –æ—Å—Ç–∞–Ω–æ–≤–æ–∫`
                );
            } catch (error) {
                showResult('result4', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        async function example5() {
            try {
                const response = await fetch('api/routes.json');
                const data = await response.json();
                const allRoutes = [...data.routes.bus, ...data.routes.trolleybus];
                const activeRoutes = allRoutes.filter(r => r.status === 'active');
                const activeList = activeRoutes.slice(0, 10).map(r => 
                    `‚Ä¢ ${r.number}: ${r.name}`
                ).join('\n');
                showResult('result5', 
                    `–ê–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤: ${activeRoutes.length}\n\n` +
                    `–ü—Ä–∏–º–µ—Ä—ã:\n${activeList}${activeRoutes.length > 10 ? '\n... –∏ –µ—â–µ ' + (activeRoutes.length - 10) + ' –º–∞—Ä—à—Ä—É—Ç–æ–≤' : ''}`
                );
            } catch (error) {
                showResult('result5', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }
    </script>
</body>
</html>

